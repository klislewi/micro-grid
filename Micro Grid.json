{"README.md":"\n> Open this page at [https://unclesam1966.github.io/micro-grid/](https://unclesam1966.github.io/micro-grid/)\n\n## Use as Extension\n\nThis repository can be added as an **extension** in MakeCode.\n\n* open [https://makecode.microbit.org/](https://makecode.microbit.org/)\n* click on **New Project**\n* click on **Extensions** under the gearwheel menu\n* search for **https://github.com/unclesam1966/micro-grid** and import\n\n## Edit this project ![Build status badge](https://github.com/unclesam1966/micro-grid/workflows/MakeCode/badge.svg)\n\nTo edit this repository in MakeCode.\n\n* open [https://makecode.microbit.org/](https://makecode.microbit.org/)\n* click on **Import** then click on **Import URL**\n* paste **https://github.com/unclesam1966/micro-grid** and click import\n\n## Blocks preview\n\nThis image shows the blocks code from the last commit in master.\nThis image may take a few minutes to refresh.\n\n![A rendered view of the blocks](https://github.com/unclesam1966/micro-grid/raw/master/.github/makecode/blocks.png)\n\n#### Metadata (used for search, rendering)\n\n* for PXT/microbit\n<script src=\"https://makecode.com/gh-pages-embed.js\"></script><script>makeCodeRender(\"{{ site.makecode.home_url }}\", \"{{ site.github.owner_name }}/{{ site.github.repository_name }}\");</script>\n","main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\";$u^6!iFs9[vpq3;9Fh=\">vmax</variable><variable id=\"Saaui2%.}_Ipvf,Ykrd`\">v</variable><variable id=\"3M5LOaPrzyY-#!jj+/Zr\">leds</variable><variable id=\"C]d}s4g2`5Ncrc;];5]F\">x</variable><variable id=\"W4E6JgEiXCxF!D-IYD3i\">prevval</variable><variable id=\"A1%_@ke$!$@$sJ6T6_ch\">olddiff</variable><variable id=\"x]NfZS`/eLp,Llp8_.4o\">diffs</variable><variable id=\"N5(`nrGzo]!`k~Pyd|L*\">newdiff</variable><variable id=\"CxlA7`m$6Z2k0(UhA$MQ\">sumd</variable><variable id=\"9BeG1[v~^X3JDK;zfBib\">SIGNIFICANT</variable><variable id=\"KsE|L]pC/9:Wn`UP[G3`\">reading</variable><variable id=\"?Z-SAUgdc`{rodz!l$_W\">t</variable><variable id=\"*^kH{/f/#40$,=I?a,!0\">DISCHARGING</variable><variable id=\"g)gT*8Ot=Jm#lhdD74ox\">CHARGING</variable><variable id=\"jW^I}BD9vpf8U3wz{=1y\">P0_MAX</variable><variable id=\"KuxO]hu^h:20Y7fY*~Qx\">list</variable><variable id=\"Qo.TS@bG=){g-%s0aCUf\">GRID</variable><variable id=\"L)Ypc~G{L:8{G=Ri(_s)\">RENEWABLES</variable><variable id=\")!4,t|5M7frPw/7k![i;\">OVERRIDE</variable><variable id=\"KzM;Faf#m~%#jq;~^VF{\">BLACK</variable></variables><block type=\"device_get_digital_pin\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"-122\" y=\"-1817\"><value name=\"name\"><shadow type=\"digital_pin_shadow\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"pin\">DigitalPin.P0</field></shadow></value></block><block type=\"pxt-on-start\" x=\"-134\" y=\"-1766\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"x]NfZS`/eLp,Llp8_.4o\">diffs</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"2\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"ADD1\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9BeG1[v~^X3JDK;zfBib\">SIGNIFICANT</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">11</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jW^I}BD9vpf8U3wz{=1y\">P0_MAX</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">812</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"g)gT*8Ot=Jm#lhdD74ox\">CHARGING</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_image\"><field name=\"LEDS\">`\n        . . # # . \n        . # . . . \n        . # . . . \n        . . # # . \n        . . . . .\n        `</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*^kH{/f/#40$,=I?a,!0\">DISCHARGING</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_image\"><field name=\"LEDS\">`\n        . # # . . \n        . # . # . \n        . # . # . \n        . # # . . \n        . . . . .\n        `</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Qo.TS@bG=){g-%s0aCUf\">GRID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_image\"><field name=\"LEDS\">`\n        . . # # . \n        . # . . . \n        . # . # . \n        . . # # . \n        . . . . .\n        `</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"L)Ypc~G{L:8{G=Ri(_s)\">RENEWABLES</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_image\"><field name=\"LEDS\">`\n        . # # . . \n        . # . # . \n        . # # . . \n        . # . # . \n        . . . . .\n        `</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"KzM;Faf#m~%#jq;~^VF{\">BLACK</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_build_image\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        . . # . . \n        . . # . . \n        . . . . .\n        `</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"482\" y=\"-1757\"><field name=\"NAME\">Button.A</field><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\")!4,t|5M7frPw/7k![i;\">OVERRIDE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"971\" y=\"-1735\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"KsE|L]pC/9:Wn`UP[G3`\">reading</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_analog_pin\"><value name=\"name\"><shadow type=\"analog_read_write_pin_shadow\"><field name=\"pin\">AnalogReadWritePin.P0</field></shadow></value></block></value><next><block type=\"device_clear_display\"><next><block type=\"variables_set\"><field name=\"VAR\" id=\"?Z-SAUgdc`{rodz!l$_W\">t</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"trend\" functionid=\"gCb`q3tgA6Kzv[2U5k1h\"><arg name=\"newval\" id=\"lrxeq8bzl5yflnof6zzzr\" type=\"number\"></arg></mutation><value name=\"lrxeq8bzl5yflnof6zzzr\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"KsE|L]pC/9:Wn`UP[G3`\">reading</field></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"?Z-SAUgdc`{rodz!l$_W\">t</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_show_image_offset\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" _expanded=\"0\" _input_init=\"true\"></mutation><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"*^kH{/f/#40$,=I?a,!0\">DISCHARGING</field></block></value><value name=\"offset\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"?Z-SAUgdc`{rodz!l$_W\">t</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_show_image_offset\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" _expanded=\"0\" _input_init=\"true\"></mutation><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"g)gT*8Ot=Jm#lhdD74ox\">CHARGING</field></block></value><value name=\"offset\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_show_image_offset\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" _expanded=\"0\" _input_init=\"true\"></mutation><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Qo.TS@bG=){g-%s0aCUf\">GRID</field></block></value><value name=\"offset\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\")!4,t|5M7frPw/7k![i;\">OVERRIDE</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P2</field></shadow></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P2</field></shadow></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\")!4,t|5M7frPw/7k![i;\">OVERRIDE</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_show_image_offset\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" _expanded=\"0\" _input_init=\"true\"></mutation><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"KzM;Faf#m~%#jq;~^VF{\">BLACK</field></block></value><value name=\"offset\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"device_show_image_offset\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" _expanded=\"0\" _input_init=\"true\"></mutation><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"L)Ypc~G{L:8{G=Ri(_s)\">RENEWABLES</field></block></value><value name=\"offset\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"KsE|L]pC/9:Wn`UP[G3`\">reading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">200</field></shadow></value></block></value><value name=\"B\"><block type=\"variables_get\"><field name=\"VAR\" id=\")!4,t|5M7frPw/7k![i;\">OVERRIDE</field></block></value></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P2</field></shadow></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\")!4,t|5M7frPw/7k![i;\">OVERRIDE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"KsE|L]pC/9:Wn`UP[G3`\">reading</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">800</field></shadow></value></block></value><value name=\"B\"><block type=\"variables_get\"><field name=\"VAR\" id=\")!4,t|5M7frPw/7k![i;\">OVERRIDE</field></block></value></block></value><statement name=\"DO0\"><block type=\"device_set_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P2</field></shadow></value><value name=\"value\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"1\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></statement></block></next></block></next></block></statement><next><block type=\"function_call\"><mutation name=\"barchart\" functionid=\"ix4oR~W|gvzB7X::eyI|\"><arg name=\"y\" id=\"9a6y494dnbf2s7sxzkzim\" type=\"number\"></arg><arg name=\"v\" id=\"cktgphpj7dsqk0yjvmur\" type=\"number\"></arg><arg name=\"vmax\" id=\"9rkmpjilq6nveb44dane3\" type=\"number\"></arg></mutation><value name=\"9a6y494dnbf2s7sxzkzim\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value><value name=\"cktgphpj7dsqk0yjvmur\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"KsE|L]pC/9:Wn`UP[G3`\">reading</field></block></value><value name=\"9rkmpjilq6nveb44dane3\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"jW^I}BD9vpf8U3wz{=1y\">P0_MAX</field></block></value><next><block type=\"serial_writeline\"><value name=\"text\"><block type=\"variable_to_text\"><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_analog_pin\"><value name=\"name\"><shadow type=\"analog_read_write_pin_shadow\"><field name=\"pin\">AnalogReadWritePin.P0</field></shadow></value></block></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"495\" y=\"-1584\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\")!4,t|5M7frPw/7k![i;\">OVERRIDE</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"0\"><mutation name=\"trend\" functionid=\"gCb`q3tgA6Kzv[2U5k1h\"><arg name=\"newval\" id=\"lrxeq8bzl5yflnof6zzzr\" type=\"number\"></arg></mutation><field name=\"function_name\">trend</field><value name=\"lrxeq8bzl5yflnof6zzzr\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">newval</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"W4E6JgEiXCxF!D-IYD3i\">prevval</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"A1%_@ke$!$@$sJ6T6_ch\">olddiff</field><value name=\"VALUE\"><shadow type=\"math_number\" disabled-reasons=\"MANUALLY_DISABLED\"><field name=\"NUM\">0</field></shadow><block type=\"array_pop\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"x]NfZS`/eLp,Llp8_.4o\">diffs</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N5(`nrGzo]!`k~Pyd|L*\">newdiff</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">newval</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"W4E6JgEiXCxF!D-IYD3i\">prevval</field></block></value></block></value><next><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"x]NfZS`/eLp,Llp8_.4o\">diffs</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N5(`nrGzo]!`k~Pyd|L*\">newdiff</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"CxlA7`m$6Z2k0(UhA$MQ\">sumd</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"CxlA7`m$6Z2k0(UhA$MQ\">sumd</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A1%_@ke$!$@$sJ6T6_ch\">olddiff</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"N5(`nrGzo]!`k~Pyd|L*\">newdiff</field></block></value></block></value><next><block type=\"serial_writeline\"><value name=\"text\"><block type=\"variable_to_text\"><value name=\"value\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text_join\" inline=\"false\"><mutation items=\"7\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"W4E6JgEiXCxF!D-IYD3i\">prevval</field></block></value></block></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\"> </field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">newval</field></block></value></block></value></block></value><value name=\"ADD3\"><shadow type=\"text\"><field name=\"TEXT\"> </field></shadow></value><value name=\"ADD4\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"N5(`nrGzo]!`k~Pyd|L*\">newdiff</field></block></value></block></value></block></value><value name=\"ADD5\"><shadow type=\"text\"><field name=\"TEXT\"> </field></shadow></value><value name=\"ADD6\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"text_join\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"CxlA7`m$6Z2k0(UhA$MQ\">sumd</field></block></value></block></value></block></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"W4E6JgEiXCxF!D-IYD3i\">prevval</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">newval</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"CxlA7`m$6Z2k0(UhA$MQ\">sumd</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9BeG1[v~^X3JDK;zfBib\">SIGNIFICANT</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"CxlA7`m$6Z2k0(UhA$MQ\">sumd</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"773\" y=\"-17\"><mutation name=\"barchart\" functionid=\"ix4oR~W|gvzB7X::eyI|\"><arg name=\"y\" id=\"9a6y494dnbf2s7sxzkzim\" type=\"number\"></arg><arg name=\"v\" id=\"cktgphpj7dsqk0yjvmur\" type=\"number\"></arg><arg name=\"vmax\" id=\"9rkmpjilq6nveb44dane3\" type=\"number\"></arg></mutation><field name=\"function_name\">barchart</field><value name=\"9a6y494dnbf2s7sxzkzim\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">y</field></block></value><value name=\"cktgphpj7dsqk0yjvmur\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">v</field></block></value><value name=\"9rkmpjilq6nveb44dane3\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">vmax</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"C]d}s4g2`5Ncrc;];5]F\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3M5LOaPrzyY-#!jj+/Zr\">leds</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Saaui2%.}_Ipvf,Ykrd`\">v</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">min</field><value name=\"x\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"y\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">vmax</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3M5LOaPrzyY-#!jj+/Zr\">leds</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">trunc</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">v</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">vmax</field></block></value></block></value></block></value><next><block type=\"device_while\"><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"C]d}s4g2`5Ncrc;];5]F\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"3M5LOaPrzyY-#!jj+/Zr\">leds</field></block></value></block></value><statement name=\"DO\"><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"C]d}s4g2`5Ncrc;];5]F\">x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">y</field></block></value><next><block type=\"variables_change\"><field name=\"VAR\" id=\"C]d}s4g2`5Ncrc;];5]F\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.py":"function barchart (y: number, v: number, vmax: number) {\n    x = 0\n    leds = 0\n    v = Math.min(v, vmax)\n    leds = Math.trunc(v * 5 / vmax)\n    while (x <= leds) {\n        led.plot(x, y)\n        x += 1\n    }\n}\ninput.onButtonPressed(Button.A, function () {\n    pins.digitalWritePin(DigitalPin.P2, 0)\n})\ninput.onButtonPressed(Button.B, function () {\n    pins.digitalWritePin(DigitalPin.P2, 1)\n})\nfunction trend (newval: number) {\n    if (!(prevval == 0)) {\n        olddiff = diffs.pop()\n        newdiff = newval - prevval\n        diffs.push(newdiff)\n        sumd = sumd - olddiff + newdiff\n        serial.writeLine(convertToText(\"\" + prevval + \" \" + (\"\" + newval) + \" \" + (\"\" + newdiff) + \" \" + (\"\" + sumd)))\n    }\n    prevval = newval\n    if (Math.abs(sumd) >= SIGNIFICANT) {\n        return sumd\n    } else {\n        return 0\n    }\n}\nlet t = 0\nlet reading = 0\nlet sumd = 0\nlet newdiff = 0\nlet olddiff = 0\nlet prevval = 0\nlet v = 0\nlet leds = 0\nlet x = 0\nlet SIGNIFICANT = 0\nlet diffs: number[] = []\ndiffs = [0, 10]\nSIGNIFICANT = 11\nlet P0_MAX = 812\nlet CHARGING = images.createImage(`\n    . . # # .\n    . # . . .\n    . # . . .\n    . . # # .\n    . . . . .\n    `)\nlet DISCHARGING = images.createImage(`\n    . # # . .\n    . # . # .\n    . # . # .\n    . # # . .\n    . . . . .\n    `)\nlet GRID = images.createImage(`\n    . . # # .\n    . # . . .\n    . # . # .\n    . . # # .\n    . . . . .\n    `)\nlet RENEWABLES = images.createImage(`\n    . # # . .\n    . # . # .\n    . # # . .\n    . # . # .\n    . . . . .\n    `)\nbasic.forever(function () {\n    reading = pins.analogReadPin(AnalogPin.P0)\n    basic.clearScreen()\n    t = trend(reading)\n    if (t < 0) {\n        DISCHARGING.showImage(0)\n    }\n    if (t > 0) {\n        CHARGING.showImage(0)\n    }\n    if (pins.digitalReadPin(DigitalPin.P1) == 1) {\n        GRID.showImage(0)\n    } else {\n        RENEWABLES.showImage(0)\n        if (reading <= 200) {\n            pins.digitalWritePin(DigitalPin.P2, 0)\n        }\n        if (reading >= 800) {\n            pins.digitalWritePin(DigitalPin.P2, 1)\n        }\n    }\n    barchart(4, reading, P0_MAX)\n    serial.writeLine(convertToText(pins.analogReadPin(AnalogPin.P0)))\n    basic.pause(1000)\n})\n","main.ts":"function barchart (y: number, v: number, vmax: number) {\n    x = 0\n    leds = 0\n    v = Math.min(v, vmax)\n    leds = Math.trunc(v * 5 / vmax)\n    while (x <= leds) {\n        led.plot(x, y)\n        x += 1\n    }\n}\ninput.onButtonPressed(Button.A, function () {\n    OVERRIDE = 0\n})\ninput.onButtonPressed(Button.B, function () {\n    OVERRIDE = 1\n})\nfunction trend (newval: number) {\n    if (!(prevval == 0)) {\n        olddiff = diffs.pop()\n        newdiff = newval - prevval\n        diffs.push(newdiff)\n        sumd = sumd - olddiff + newdiff\n        serial.writeLine(convertToText(\"\" + prevval + \" \" + (\"\" + newval) + \" \" + (\"\" + newdiff) + \" \" + (\"\" + sumd)))\n    }\n    prevval = newval\n    if (Math.abs(sumd) >= SIGNIFICANT) {\n        return sumd\n    } else {\n        return 0\n    }\n}\nlet t = 0\nlet reading = 0\nlet sumd = 0\nlet newdiff = 0\nlet olddiff = 0\nlet prevval = 0\nlet OVERRIDE = 0\nlet v = 0\nlet leds = 0\nlet x = 0\nlet SIGNIFICANT = 0\nlet diffs: number[] = []\ndiffs = [0, 10]\nSIGNIFICANT = 11\nlet P0_MAX = 812\nlet CHARGING = images.createImage(`\n    . . # # .\n    . # . . .\n    . # . . .\n    . . # # .\n    . . . . .\n    `)\nlet DISCHARGING = images.createImage(`\n    . # # . .\n    . # . # .\n    . # . # .\n    . # # . .\n    . . . . .\n    `)\nlet GRID = images.createImage(`\n    . . # # .\n    . # . . .\n    . # . # .\n    . . # # .\n    . . . . .\n    `)\nlet RENEWABLES = images.createImage(`\n    . # # . .\n    . # . # .\n    . # # . .\n    . # . # .\n    . . . . .\n    `)\nlet BLACK = images.createImage(`\n    . . # . .\n    . # # # .\n    . . # . .\n    . . # . .\n    . . . . .\n    `)\nbasic.forever(function () {\n    reading = pins.analogReadPin(AnalogReadWritePin.P0)\n    basic.clearScreen()\n    t = trend(reading)\n    if (t < 0) {\n        DISCHARGING.showImage(0)\n    }\n    if (t > 0) {\n        CHARGING.showImage(0)\n    }\n    if (pins.digitalReadPin(DigitalPin.P1) == 1) {\n        GRID.showImage(0)\n        if (OVERRIDE != 0) {\n            pins.digitalWritePin(DigitalPin.P2, 1)\n        } else {\n            pins.digitalWritePin(DigitalPin.P2, 0)\n        }\n    } else {\n        if (pins.digitalReadPin(DigitalPin.P1) == 0 && OVERRIDE == 0) {\n            BLACK.showImage(0)\n        } else {\n            RENEWABLES.showImage(0)\n        }\n        if (reading <= 200 && OVERRIDE) {\n            pins.digitalWritePin(DigitalPin.P2, 0)\n            OVERRIDE = 0\n        }\n        if (reading >= 800 && OVERRIDE) {\n            pins.digitalWritePin(DigitalPin.P2, 1)\n        }\n    }\n    barchart(4, reading, P0_MAX)\n    serial.writeLine(convertToText(pins.analogReadPin(AnalogReadWritePin.P0)))\n    basic.pause(1000)\n})\n","pxt.json":"{\n    \"name\": \"Micro Grid\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"testFiles\": [\n        \"test.ts\"\n    ],\n    \"targetVersions\": {\n        \"target\": \"4.0.16\",\n        \"targetId\": \"microbit\"\n    },\n    \"supportedTargets\": [\n        \"microbit\"\n    ],\n    \"preferredEditor\": \"blocksprj\",\n    \"yotta\": {\n        \"config\": {\n            \"microbit-dal\": {\n                \"bluetooth\": {\n                    \"open\": 0,\n                    \"whitelist\": 1,\n                    \"security_level\": \"SECURITY_MODE_ENCRYPTION_NO_MITM\"\n                }\n            }\n        }\n    }\n}\n","test.ts":"// tests go here; this will not be compiled when this package is used as an extension.\n"}